<button
  type="button"
  class="rounded-full p-2 text-white transition hover:bg-white/10 cursor-pointer"
  (click)="searchModal.open()"
  aria-label="Search"
>
  <lucide-icon [img]="searchIcon" [size]="30" />
</button>

@if (searchModal.isOpen()) {
<div
  class="fixed inset-0 z-50 flex items-center justify-center bg-transparent backdrop-blur-md"
  (click)="closeModal()"
  role="dialog"
  aria-modal="true"
  aria-label="Search books"
>
  <div
    class="search-modal relative min-w-[20rem] max-w-md rounded-lg border border-white/30 bg-white/5 p-4 shadow-xl backdrop-blur-sm"
    (click)="$event.stopPropagation()"
  >
    <div class="mb-3 flex items-center justify-between">
      <span class="text-sm font-medium text-white">Search books</span>
    </div>

    <div class="search-bar" (blur)="onBlur()">
      <input
        type="search"
        [value]="query()"
        (input)="onInput($any($event.target).value)"
        placeholder="Search books..."
        autocomplete="off"
        class="bg-gray-800/50"
      />

      @if (isOpen()) {
      <ul class="results">
        @for (book of results(); track book.url) {
        <li>
          <button type="button" (mousedown)="onSelectBook(book)">
            {{ book.name }}
          </button>
        </li>
        }
      </ul>
      } @if (isOpen() && results().length === 0) {
      <p class="results-empty text-white text-center">No books found</p>
      }
    </div>
  </div>
</div>
}
